<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>jepsen.checker documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Jepsen</span> <span class="project-version">0.3.10</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1"><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>jepsen</span></div></div></li><li class="depth-2 branch"><a href="jepsen.adya.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>adya</span></div></a></li><li class="depth-2 current"><a href="jepsen.checker.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>checker</span></div></a></li><li class="depth-3 branch"><a href="jepsen.checker.clock.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>clock</span></div></a></li><li class="depth-3 branch"><a href="jepsen.checker.perf.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>perf</span></div></a></li><li class="depth-3 branch"><a href="jepsen.checker.plot.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>plot</span></div></a></li><li class="depth-3"><a href="jepsen.checker.timeline.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>timeline</span></div></a></li><li class="depth-2 branch"><a href="jepsen.cli.html"><div class="inner"><span class="tree" style="top: -145px;"><span class="top" style="height: 154px;"></span><span class="bottom"></span></span><span>cli</span></div></a></li><li class="depth-2 branch"><a href="jepsen.client.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>client</span></div></a></li><li class="depth-2 branch"><a href="jepsen.codec.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>codec</span></div></a></li><li class="depth-2"><a href="jepsen.control.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>control</span></div></a></li><li class="depth-3 branch"><a href="jepsen.control.clj-ssh.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>clj-ssh</span></div></a></li><li class="depth-3 branch"><a href="jepsen.control.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-3 branch"><a href="jepsen.control.docker.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>docker</span></div></a></li><li class="depth-3 branch"><a href="jepsen.control.k8s.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>k8s</span></div></a></li><li class="depth-3 branch"><a href="jepsen.control.net.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>net</span></div></a></li><li class="depth-3 branch"><a href="jepsen.control.retry.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>retry</span></div></a></li><li class="depth-3 branch"><a href="jepsen.control.scp.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>scp</span></div></a></li><li class="depth-3 branch"><a href="jepsen.control.sshj.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>sshj</span></div></a></li><li class="depth-3"><a href="jepsen.control.util.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>util</span></div></a></li><li class="depth-2 branch"><a href="jepsen.core.html"><div class="inner"><span class="tree" style="top: -300px;"><span class="top" style="height: 309px;"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2"><a href="jepsen.db.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>db</span></div></a></li><li class="depth-3"><a href="jepsen.db.watchdog.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>watchdog</span></div></a></li><li class="depth-2 branch"><a href="jepsen.faketime.html"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>faketime</span></div></a></li><li class="depth-2 branch"><a href="jepsen.fs-cache.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>fs-cache</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>generator</span></div></div></li><li class="depth-3"><a href="jepsen.generator.interpreter.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>interpreter</span></div></a></li><li class="depth-2 branch"><a href="jepsen.independent.html"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>independent</span></div></a></li><li class="depth-2 branch"><a href="jepsen.lazyfs.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>lazyfs</span></div></a></li><li class="depth-2"><a href="jepsen.nemesis.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>nemesis</span></div></a></li><li class="depth-3 branch"><a href="jepsen.nemesis.combined.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>combined</span></div></a></li><li class="depth-3 branch"><a href="jepsen.nemesis.file.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>file</span></div></a></li><li class="depth-3"><a href="jepsen.nemesis.membership.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>membership</span></div></a></li><li class="depth-4"><a href="jepsen.nemesis.membership.state.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>state</span></div></a></li><li class="depth-3"><a href="jepsen.nemesis.time.html"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>time</span></div></a></li><li class="depth-2"><a href="jepsen.net.html"><div class="inner"><span class="tree" style="top: -176px;"><span class="top" style="height: 185px;"></span><span class="bottom"></span></span><span>net</span></div></a></li><li class="depth-3"><a href="jepsen.net.proto.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>proto</span></div></a></li><li class="depth-2"><a href="jepsen.os.html"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>os</span></div></a></li><li class="depth-3 branch"><a href="jepsen.os.centos.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>centos</span></div></a></li><li class="depth-3 branch"><a href="jepsen.os.debian.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>debian</span></div></a></li><li class="depth-3 branch"><a href="jepsen.os.smartos.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>smartos</span></div></a></li><li class="depth-3"><a href="jepsen.os.ubuntu.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>ubuntu</span></div></a></li><li class="depth-2 branch"><a href="jepsen.reconnect.html"><div class="inner"><span class="tree" style="top: -145px;"><span class="top" style="height: 154px;"></span><span class="bottom"></span></span><span>reconnect</span></div></a></li><li class="depth-2 branch"><a href="jepsen.repl.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>repl</span></div></a></li><li class="depth-2 branch"><a href="jepsen.report.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>report</span></div></a></li><li class="depth-2 branch"><a href="jepsen.role.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>role</span></div></a></li><li class="depth-2"><a href="jepsen.store.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>store</span></div></a></li><li class="depth-3 branch"><a href="jepsen.store.format.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>format</span></div></a></li><li class="depth-3"><a href="jepsen.store.fressian.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>fressian</span></div></a></li><li class="depth-2"><a href="jepsen.tests.html"><div class="inner"><span class="tree" style="top: -83px;"><span class="top" style="height: 92px;"></span><span class="bottom"></span></span><span>tests</span></div></a></li><li class="depth-3 branch"><a href="jepsen.tests.adya.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>adya</span></div></a></li><li class="depth-3 branch"><a href="jepsen.tests.bank.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>bank</span></div></a></li><li class="depth-3 branch"><a href="jepsen.tests.causal.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>causal</span></div></a></li><li class="depth-3 branch"><a href="jepsen.tests.causal-reverse.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>causal-reverse</span></div></a></li><li class="depth-3"><a href="jepsen.tests.cycle.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>cycle</span></div></a></li><li class="depth-4 branch"><a href="jepsen.tests.cycle.append.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>append</span></div></a></li><li class="depth-4"><a href="jepsen.tests.cycle.wr.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>wr</span></div></a></li><li class="depth-3 branch"><a href="jepsen.tests.kafka.html"><div class="inner"><span class="tree" style="top: -83px;"><span class="top" style="height: 92px;"></span><span class="bottom"></span></span><span>kafka</span></div></a></li><li class="depth-3 branch"><a href="jepsen.tests.linearizable-register.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>linearizable-register</span></div></a></li><li class="depth-3"><a href="jepsen.tests.long-fork.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>long-fork</span></div></a></li><li class="depth-2 branch"><a href="jepsen.util.html"><div class="inner"><span class="tree" style="top: -331px;"><span class="top" style="height: 340px;"></span><span class="bottom"></span></span><span>util</span></div></a></li><li class="depth-2"><a href="jepsen.web.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>web</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="jepsen.checker.html#var-check-safe"><div class="inner"><span>check-safe</span></div></a></li><li class="depth-1"><a href="jepsen.checker.html#var-Checker"><div class="inner"><span>Checker</span></div></a></li><li class="depth-2"><a href="jepsen.checker.html#var-check"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>check</span></div></a></li><li class="depth-1"><a href="jepsen.checker.html#var-clock-plot"><div class="inner"><span>clock-plot</span></div></a></li><li class="depth-1"><a href="jepsen.checker.html#var-compose"><div class="inner"><span>compose</span></div></a></li><li class="depth-1"><a href="jepsen.checker.html#var-concurrency-limit"><div class="inner"><span>concurrency-limit</span></div></a></li><li class="depth-1"><a href="jepsen.checker.html#var-counter"><div class="inner"><span>counter</span></div></a></li><li class="depth-1"><a href="jepsen.checker.html#var-expand-queue-drain-ops"><div class="inner"><span>expand-queue-drain-ops</span></div></a></li><li class="depth-1"><a href="jepsen.checker.html#var-frequency-distribution"><div class="inner"><span>frequency-distribution</span></div></a></li><li class="depth-1"><a href="jepsen.checker.html#var-latency-graph"><div class="inner"><span>latency-graph</span></div></a></li><li class="depth-1"><a href="jepsen.checker.html#var-linearizable"><div class="inner"><span>linearizable</span></div></a></li><li class="depth-1"><a href="jepsen.checker.html#var-log-file-pattern"><div class="inner"><span>log-file-pattern</span></div></a></li><li class="depth-1"><a href="jepsen.checker.html#var-merge-valid"><div class="inner"><span>merge-valid</span></div></a></li><li class="depth-1"><a href="jepsen.checker.html#var-noop"><div class="inner"><span>noop</span></div></a></li><li class="depth-1"><a href="jepsen.checker.html#var-op-color-plot"><div class="inner"><span>op-color-plot</span></div></a></li><li class="depth-1"><a href="jepsen.checker.html#var-perf"><div class="inner"><span>perf</span></div></a></li><li class="depth-1"><a href="jepsen.checker.html#var-queue"><div class="inner"><span>queue</span></div></a></li><li class="depth-1"><a href="jepsen.checker.html#var-rate-graph"><div class="inner"><span>rate-graph</span></div></a></li><li class="depth-1"><a href="jepsen.checker.html#var-set"><div class="inner"><span>set</span></div></a></li><li class="depth-1"><a href="jepsen.checker.html#var-set-full"><div class="inner"><span>set-full</span></div></a></li><li class="depth-1"><a href="jepsen.checker.html#var-set-full-add"><div class="inner"><span>set-full-add</span></div></a></li><li class="depth-1"><a href="jepsen.checker.html#var-set-full-element"><div class="inner"><span>set-full-element</span></div></a></li><li class="depth-1"><a href="jepsen.checker.html#var-set-full-element-results"><div class="inner"><span>set-full-element-results</span></div></a></li><li class="depth-1"><a href="jepsen.checker.html#var-set-full-read-absent"><div class="inner"><span>set-full-read-absent</span></div></a></li><li class="depth-1"><a href="jepsen.checker.html#var-set-full-read-present"><div class="inner"><span>set-full-read-present</span></div></a></li><li class="depth-1"><a href="jepsen.checker.html#var-set-full-results"><div class="inner"><span>set-full-results</span></div></a></li><li class="depth-1"><a href="jepsen.checker.html#var-stats"><div class="inner"><span>stats</span></div></a></li><li class="depth-1"><a href="jepsen.checker.html#var-stats-fold"><div class="inner"><span>stats-fold</span></div></a></li><li class="depth-1"><a href="jepsen.checker.html#var-total-queue"><div class="inner"><span>total-queue</span></div></a></li><li class="depth-1"><a href="jepsen.checker.html#var-unbridled-optimism"><div class="inner"><span>unbridled-optimism</span></div></a></li><li class="depth-1"><a href="jepsen.checker.html#var-unhandled-exceptions"><div class="inner"><span>unhandled-exceptions</span></div></a></li><li class="depth-1"><a href="jepsen.checker.html#var-unique-ids"><div class="inner"><span>unique-ids</span></div></a></li><li class="depth-1"><a href="jepsen.checker.html#var-valid-priorities"><div class="inner"><span>valid-priorities</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">jepsen.checker</h1><div class="doc"><div class="markdown"><p>Validates that a history is correct with respect to some model.</p>
</div></div><div class="public anchor" id="var-check-safe"><h3>check-safe</h3><div class="usage"><code>(check-safe checker test history)</code><code>(check-safe checker test history opts)</code></div><div class="doc"><div class="markdown"><p>Like check, but wraps exceptions up and returns them as a map like</p>
<p>{:valid? :unknown :error {:via <a href="{:type clojure.lang.Exceptioninfo, ...}">{:type clojure.lang.Exceptioninfo, …}</a> …}</p>
</div></div><div class="src-link"><a href="https://github.com/jepsen-io/jepsen/blob/v0.3.10/jepsen/src/jepsen/checker.clj#L87">view source</a></div></div><div class="public anchor" id="var-Checker"><h3>Checker</h3><h4 class="type">protocol</h4><div class="usage"></div><div class="doc"><div class="markdown"></div></div><div class="members"><h4>members</h4><div class="inner"><div class="public anchor" id="var-check"><h3>check</h3><div class="usage"><code>(check checker test history opts)</code></div><div class="doc"><div class="markdown"><p>Verify the history is correct. Returns a map like</p>
<p>{:valid? true}</p>
<p>or</p>
<p>{:valid?       false :some-details … :failed-at    <a href="details of specific operations">details of specific operations</a>}</p>
<p>Opts is a map of options controlling checker execution. Keys include:</p>
<p>:subdirectory - A directory within this test’s store directory where output files should be written. Defaults to nil.</p>
</div></div></div></div></div><div class="src-link"><a href="https://github.com/jepsen-io/jepsen/blob/v0.3.10/jepsen/src/jepsen/checker.clj#L59">view source</a></div></div><div class="public anchor" id="var-clock-plot"><h3>clock-plot</h3><div class="usage"><code>(clock-plot)</code></div><div class="doc"><div class="markdown"><p>Plots clock offsets on all nodes.</p>
</div></div><div class="src-link"><a href="https://github.com/jepsen-io/jepsen/blob/v0.3.10/jepsen/src/jepsen/checker.clj#L911">view source</a></div></div><div class="public anchor" id="var-compose"><h3>compose</h3><div class="usage"><code>(compose checkers)</code></div><div class="doc"><div class="markdown"><p>Takes a map of names to checkers, and returns a checker which runs each check (possibly in parallel) and returns a map of names to results; plus a top-level :valid? key which is true iff every checker considered the history valid.</p>
</div></div><div class="src-link"><a href="https://github.com/jepsen-io/jepsen/blob/v0.3.10/jepsen/src/jepsen/checker.clj#L110">view source</a></div></div><div class="public anchor" id="var-concurrency-limit"><h3>concurrency-limit</h3><div class="usage"><code>(concurrency-limit limit checker)</code></div><div class="doc"><div class="markdown"><p>Takes positive integer limit and a checker. Puts an upper bound on the number of concurrent executions of this checker. Use this when a checker is particularly thread or memory intensive, to reduce context switching and memory cost.</p>
</div></div><div class="src-link"><a href="https://github.com/jepsen-io/jepsen/blob/v0.3.10/jepsen/src/jepsen/checker.clj#L126">view source</a></div></div><div class="public anchor" id="var-counter"><h3>counter</h3><div class="usage"><code>(counter)</code></div><div class="doc"><div class="markdown"><p>A counter starts at zero; add operations should increment it by that much, and reads should return the present value. This checker validates that at each read, the value is greater than the sum of all :ok increments, and lower than the sum of all attempted increments.</p>
<p>Note that this counter verifier assumes the value monotonically increases: decrements are not allowed.</p>
<p>Returns a map:</p>
<p>:valid?              Whether the counter remained within bounds :reads               [<a href="lower-bound read-value upper-bound">lower-bound read-value upper-bound</a> …] :errors              [<a href="lower-bound read-value upper-bound">lower-bound read-value upper-bound</a> …]</p>
<p>; Not implemented, but might be nice:</p>
<p>:max-absolute-error The <a href="lower read upper">lower read upper</a> where read falls furthest outside :max-relative-error Same, but with error computed as a fraction of the mean}</p>
</div></div><div class="src-link"><a href="https://github.com/jepsen-io/jepsen/blob/v0.3.10/jepsen/src/jepsen/checker.clj#L842">view source</a></div></div><div class="public anchor" id="var-expand-queue-drain-ops"><h3>expand-queue-drain-ops</h3><div class="usage"><code>(expand-queue-drain-ops)</code></div><div class="doc"><div class="markdown"><p>A Tesser fold which looks for :drain operations with their value being a collection of queue elements, and expands them to a sequence of :dequeue invoke/complete pairs.</p>
</div></div><div class="src-link"><a href="https://github.com/jepsen-io/jepsen/blob/v0.3.10/jepsen/src/jepsen/checker.clj#L648">view source</a></div></div><div class="public anchor" id="var-frequency-distribution"><h3>frequency-distribution</h3><div class="usage"><code>(frequency-distribution points c)</code></div><div class="doc"><div class="markdown"><p>Computes a map of percentiles (0–1, not 0–100, we’re not monsters) of a collection of numbers, taken at percentiles <code>points</code>. If the collection is empty, returns nil.</p>
</div></div><div class="src-link"><a href="https://github.com/jepsen-io/jepsen/blob/v0.3.10/jepsen/src/jepsen/checker.clj#L466">view source</a></div></div><div class="public anchor" id="var-latency-graph"><h3>latency-graph</h3><div class="usage"><code>(latency-graph)</code><code>(latency-graph opts)</code></div><div class="doc"><div class="markdown"><p>Spits out graphs of latencies. Checker options take precedence over those passed in with this constructor.</p>
</div></div><div class="src-link"><a href="https://github.com/jepsen-io/jepsen/blob/v0.3.10/jepsen/src/jepsen/checker.clj#L873">view source</a></div></div><div class="public anchor" id="var-linearizable"><h3>linearizable</h3><div class="usage"><code>(linearizable {:keys [algorithm model]})</code></div><div class="doc"><div class="markdown"><p>Validates linearizability with Knossos. Defaults to the competition checker, but can be controlled by passing either :linear or :wgl.</p>
<p>Takes an options map for arguments, ex. {:model (model/cas-register) :algorithm :wgl}</p>
</div></div><div class="src-link"><a href="https://github.com/jepsen-io/jepsen/blob/v0.3.10/jepsen/src/jepsen/checker.clj#L247">view source</a></div></div><div class="public anchor" id="var-log-file-pattern"><h3>log-file-pattern</h3><div class="usage"><code>(log-file-pattern pattern filename)</code></div><div class="doc"><div class="markdown"><p>Takes a PCRE regular expression pattern (as a Pattern or string) and a filename. Checks the store directory for this test, and in each node directory (e.g. n1), examines the given file to see if it contains instances of the pattern. Returns :valid? true if no instances are found, and :valid? false otherwise, along with a :count of the number of matches, and a :matches list of maps, each with the node and matching string from the file.</p>
<p>(log-file-pattern #“panic: (\w+)$” “db.log”)</p>
<p>{:valid? false :count  5 :matches {:node “n1” :line “panic: invariant violation” “invariant violation” …]}}</p>
</div></div><div class="src-link"><a href="https://github.com/jepsen-io/jepsen/blob/v0.3.10/jepsen/src/jepsen/checker.clj#L959">view source</a></div></div><div class="public anchor" id="var-merge-valid"><h3>merge-valid</h3><div class="usage"><code>(merge-valid valids)</code></div><div class="doc"><div class="markdown"><p>Merge n :valid values, yielding the one with the highest priority.</p>
</div></div><div class="src-link"><a href="https://github.com/jepsen-io/jepsen/blob/v0.3.10/jepsen/src/jepsen/checker.clj#L43">view source</a></div></div><div class="public anchor" id="var-noop"><h3>noop</h3><div class="usage"><code>(noop)</code></div><div class="doc"><div class="markdown"><p>An empty checker that only returns nil. TODO: is this… even legal? Should we replace this with unbridled-optimism, or is it helpful to have a checker that returns nil so you know it hasn’t been properly replaced?</p>
</div></div><div class="src-link"><a href="https://github.com/jepsen-io/jepsen/blob/v0.3.10/jepsen/src/jepsen/checker.clj#L80">view source</a></div></div><div class="public anchor" id="var-op-color-plot"><h3>op-color-plot</h3><div class="usage"><code>(op-color-plot)</code><code>(op-color-plot opts)</code></div><div class="doc"><div class="markdown"><p>A checker which draws an operation color plot—see <code>jepsen.checker.plot/op-color-plot!</code> for details. Takes an options map, which is merged with checker-provided options and passed to <code>op-color-plot!</code>.</p>
</div></div><div class="src-link"><a href="https://github.com/jepsen-io/jepsen/blob/v0.3.10/jepsen/src/jepsen/checker.clj#L922">view source</a></div></div><div class="public anchor" id="var-perf"><h3>perf</h3><div class="usage"><code>(perf)</code><code>(perf opts)</code></div><div class="doc"><div class="markdown"><p>Composes various performance statistics. Checker options take precedence over those passed in with this constructor.</p>
</div></div><div class="src-link"><a href="https://github.com/jepsen-io/jepsen/blob/v0.3.10/jepsen/src/jepsen/checker.clj#L896">view source</a></div></div><div class="public anchor" id="var-queue"><h3>queue</h3><div class="usage"><code>(queue model)</code></div><div class="doc"><div class="markdown"><p>Every dequeue must come from somewhere. Validates queue operations by assuming every non-failing enqueue succeeded, and only OK dequeues succeeded, then reducing the model with that history. Every subhistory of every queue should obey this property. Should probably be used with an unordered queue model, because we don’t look for alternate orderings. O(n).</p>
</div></div><div class="src-link"><a href="https://github.com/jepsen-io/jepsen/blob/v0.3.10/jepsen/src/jepsen/checker.clj#L277">view source</a></div></div><div class="public anchor" id="var-rate-graph"><h3>rate-graph</h3><div class="usage"><code>(rate-graph)</code><code>(rate-graph opts)</code></div><div class="doc"><div class="markdown"><p>Spits out graphs of throughput over time. Checker options take precedence over those passed in with this constructor.</p>
</div></div><div class="src-link"><a href="https://github.com/jepsen-io/jepsen/blob/v0.3.10/jepsen/src/jepsen/checker.clj#L888">view source</a></div></div><div class="public anchor" id="var-set"><h3>set</h3><div class="usage"><code>(set)</code></div><div class="doc"><div class="markdown"><p>Given a set of :add operations followed by a final :read, verifies that every successfully added element is present in the read, and that the read contains only elements for which an add was attempted.</p>
</div></div><div class="src-link"><a href="https://github.com/jepsen-io/jepsen/blob/v0.3.10/jepsen/src/jepsen/checker.clj#L344">view source</a></div></div><div class="public anchor" id="var-set-full"><h3>set-full</h3><div class="usage"><code>(set-full)</code><code>(set-full checker-opts)</code></div><div class="doc"><div class="markdown"><p>A more rigorous set analysis. We allow :add operations which add a single element, and :reads which return all elements present at that time. For each element, we construct a timeline like so:</p>
<pre><code>[nonexistent] ... [created] ... [present] ... [absent] ... [present] ...
</code></pre>
<p>For each element:</p>
<p>The <em>add</em> is the operation which added that element.</p>
<p>The <em>known time</em> is the completion time of the add, or first read, whichever is earlier.</p>
<p>The <em>stable time</em> is the time after which every read which begins observes the element. If every read beginning after the add time observes the element, the stable time is the add time. If the final read fails to observe the element, the stable time is nil.</p>
<p>A <em>stable element</em> is one which has a stable time.</p>
<p>The <em>lost time</em> is the time after which no operation observes that element. If the most final read observes the element, the lost time is nil.</p>
<p>A <em>lost element</em> is one which has a lost time.</p>
<p>An element can be either stable or lost, but not both.</p>
<p>The <em>first read latency</em> is 0 if the first read invoked after the add time observes the element. If the element is never observed, it is nil. Otherwise, the first read delay is the time from the completion of the write to the invocation of the first read.</p>
<p>The <em>stable latency</em> is the time between the add time and the stable time, or 0, whichever is greater.</p>
<p>Options are:</p>
<pre><code>:linearizable?    If true, we expect this set to be linearizable, and
                  stale reads result in an invalid result.
</code></pre>
<p>Computes aggregate results:</p>
<pre><code>:valid?               False if there were any lost elements.
                      :unknown if there were no lost *or* stale elements;
                      e.g. if the test never inserted anything, every
                      insert crashed, etc. For :linearizable? tests,
                      false if there were lost *or* stale elements.
:attempt-count        Number of attempted inserts
:stable-count         Number of elements which had a time after which
                      they were always found
:lost                 Elements which had a time after which
                      they were never found
:lost-count           Number of lost elements
:never-read           Elements where no read began after the time when
                      that element was known to have been inserted.
                      Includes elements which were never known to have
                      been inserted.
:never-read-count     Number of elements never read
:stale                Elements which failed to appear in a read beginning
                      after we knew the operation completed.
:stale-count          Number of stale elements.
:worst-stale          Detailed description of stale elements with the
                      highest stable latencies; e.g. which ones took the
                      longest to show up.
:stable-latencies     Map of quantiles to latencies, in milliseconds, it
                      took for elements to become stable. 0 indicates the
                      element was linearizable.
:lost-latencies       Map of quantiles to latencies, in milliseconds, it
                      took for elements to become lost. 0 indicates the
                      element was known to be inserted, but never
                      observed.
</code></pre>
</div></div><div class="src-link"><a href="https://github.com/jepsen-io/jepsen/blob/v0.3.10/jepsen/src/jepsen/checker.clj#L571">view source</a></div></div><div class="public anchor" id="var-set-full-add"><h3>set-full-add</h3><div class="usage"><code>(set-full-add element-state op)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/jepsen-io/jepsen/blob/v0.3.10/jepsen/src/jepsen/checker.clj#L351">view source</a></div></div><div class="public anchor" id="var-set-full-element"><h3>set-full-element</h3><div class="usage"><code>(set-full-element op)</code></div><div class="doc"><div class="markdown"><p>Given an add invocation, constructs a new set element state record to track that element</p>
</div></div><div class="src-link"><a href="https://github.com/jepsen-io/jepsen/blob/v0.3.10/jepsen/src/jepsen/checker.clj#L397">view source</a></div></div><div class="public anchor" id="var-set-full-element-results"><h3>set-full-element-results</h3><div class="usage"><code>(set-full-element-results e)</code></div><div class="doc"><div class="markdown"><p>Takes a SetFullElement and computes a map of final results from it:</p>
<p>:element         The element itself :outcome         :stable, :lost, :never-read :lost-latency :stable-latency</p>
</div></div><div class="src-link"><a href="https://github.com/jepsen-io/jepsen/blob/v0.3.10/jepsen/src/jepsen/checker.clj#L403">view source</a></div></div><div class="public anchor" id="var-set-full-read-absent"><h3>set-full-read-absent</h3><div class="usage"><code>(set-full-read-absent element-state inv op)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/jepsen-io/jepsen/blob/v0.3.10/jepsen/src/jepsen/checker.clj#L351">view source</a></div></div><div class="public anchor" id="var-set-full-read-present"><h3>set-full-read-present</h3><div class="usage"><code>(set-full-read-present element-state inv op)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/jepsen-io/jepsen/blob/v0.3.10/jepsen/src/jepsen/checker.clj#L351">view source</a></div></div><div class="public anchor" id="var-set-full-results"><h3>set-full-results</h3><div class="usage"><code>(set-full-results opts elements)</code></div><div class="doc"><div class="markdown"><p>Takes options from set-full, and a collection of SetFullElements. Computes agggregate results; see set-full for details.</p>
</div></div><div class="src-link"><a href="https://github.com/jepsen-io/jepsen/blob/v0.3.10/jepsen/src/jepsen/checker.clj#L479">view source</a></div></div><div class="public anchor" id="var-stats"><h3>stats</h3><div class="usage"><code>(stats)</code></div><div class="doc"><div class="markdown"><p>Computes basic statistics about success and failure rates, both overall and broken down by :f. Results are valid only if every :f has at some :ok operations; otherwise they’re :unknown.</p>
</div></div><div class="src-link"><a href="https://github.com/jepsen-io/jepsen/blob/v0.3.10/jepsen/src/jepsen/checker.clj#L218">view source</a></div></div><div class="public anchor" id="var-stats-fold"><h3>stats-fold</h3><div class="usage"></div><div class="doc"><div class="markdown"><p>Helper for computing stats over a history or filtered history.</p>
</div></div><div class="src-link"><a href="https://github.com/jepsen-io/jepsen/blob/v0.3.10/jepsen/src/jepsen/checker.clj#L179">view source</a></div></div><div class="public anchor" id="var-total-queue"><h3>total-queue</h3><div class="usage"><code>(total-queue)</code></div><div class="doc"><div class="markdown"><p>What goes in <em>must</em> come out. Verifies that every successful enqueue has a successful dequeue. Queues only obey this property if the history includes draining them completely. O(n).</p>
</div></div><div class="src-link"><a href="https://github.com/jepsen-io/jepsen/blob/v0.3.10/jepsen/src/jepsen/checker.clj#L741">view source</a></div></div><div class="public anchor" id="var-unbridled-optimism"><h3>unbridled-optimism</h3><div class="usage"><code>(unbridled-optimism)</code></div><div class="doc"><div class="markdown"><p>Everything is awesoooommmmme!</p>
</div></div><div class="src-link"><a href="https://github.com/jepsen-io/jepsen/blob/v0.3.10/jepsen/src/jepsen/checker.clj#L141">view source</a></div></div><div class="public anchor" id="var-unhandled-exceptions"><h3>unhandled-exceptions</h3><div class="usage"><code>(unhandled-exceptions)</code></div><div class="doc"><div class="markdown"><p>Returns information about unhandled exceptions: a sequence of maps sorted in descending frequency order, each with:</p>
<pre><code>:class    The class of the exception thrown
:count    How many of this exception we observed
:example  An example operation
</code></pre>
</div></div><div class="src-link"><a href="https://github.com/jepsen-io/jepsen/blob/v0.3.10/jepsen/src/jepsen/checker.clj#L169">view source</a></div></div><div class="public anchor" id="var-unique-ids"><h3>unique-ids</h3><div class="usage"><code>(unique-ids)</code></div><div class="doc"><div class="markdown"><p>Checks that a unique id generator actually emits unique IDs. Expects a history with :f :generate invocations matched by :ok responses with distinct IDs for their :values. IDs should be comparable. Returns</p>
<pre><code>{:valid?              Were all IDs unique?
 :attempted-count     Number of attempted ID generation calls
 :acknowledged-count  Number of IDs actually returned successfully
 :duplicated-count    Number of IDs which were not distinct
 :duplicated          A map of some duplicate IDs to the number of times
                      they appeared--not complete for perf reasons :D
 :range               [lowest-id highest-id]}
</code></pre>
</div></div><div class="src-link"><a href="https://github.com/jepsen-io/jepsen/blob/v0.3.10/jepsen/src/jepsen/checker.clj#L775">view source</a></div></div><div class="public anchor" id="var-valid-priorities"><h3>valid-priorities</h3><div class="usage"></div><div class="doc"><div class="markdown"><p>A map of :valid? values to their importance. Larger numbers are considered more signficant and dominate when checkers are composed.</p>
</div></div><div class="src-link"><a href="https://github.com/jepsen-io/jepsen/blob/v0.3.10/jepsen/src/jepsen/checker.clj#L36">view source</a></div></div></div></body></html>