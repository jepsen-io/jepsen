<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>jepsen.checker.perf documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Jepsen</span> <span class="project-version">0.1.11</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>jepsen</span></div></div></li><li class="depth-2 branch"><a href="jepsen.adya.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>adya</span></div></a></li><li class="depth-2"><a href="jepsen.checker.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>checker</span></div></a></li><li class="depth-3 branch"><a href="jepsen.checker.clock.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>clock</span></div></a></li><li class="depth-3 branch current"><a href="jepsen.checker.perf.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>perf</span></div></a></li><li class="depth-3"><a href="jepsen.checker.timeline.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>timeline</span></div></a></li><li class="depth-2 branch"><a href="jepsen.cli.html"><div class="inner"><span class="tree" style="top: -114px;"><span class="top" style="height: 123px;"></span><span class="bottom"></span></span><span>cli</span></div></a></li><li class="depth-2 branch"><a href="jepsen.client.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>client</span></div></a></li><li class="depth-2 branch"><a href="jepsen.codec.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>codec</span></div></a></li><li class="depth-2"><a href="jepsen.control.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>control</span></div></a></li><li class="depth-3 branch"><a href="jepsen.control.net.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>net</span></div></a></li><li class="depth-3"><a href="jepsen.control.util.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>util</span></div></a></li><li class="depth-2 branch"><a href="jepsen.core.html"><div class="inner"><span class="tree" style="top: -83px;"><span class="top" style="height: 92px;"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2 branch"><a href="jepsen.db.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>db</span></div></a></li><li class="depth-2 branch"><a href="jepsen.faketime.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>faketime</span></div></a></li><li class="depth-2 branch"><a href="jepsen.generator.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>generator</span></div></a></li><li class="depth-2 branch"><a href="jepsen.independent.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>independent</span></div></a></li><li class="depth-2"><a href="jepsen.nemesis.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>nemesis</span></div></a></li><li class="depth-3"><a href="jepsen.nemesis.time.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>time</span></div></a></li><li class="depth-2"><a href="jepsen.net.html"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>net</span></div></a></li><li class="depth-3"><a href="jepsen.net.proto.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>proto</span></div></a></li><li class="depth-2"><a href="jepsen.os.html"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>os</span></div></a></li><li class="depth-3 branch"><a href="jepsen.os.centos.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>centos</span></div></a></li><li class="depth-3"><a href="jepsen.os.debian.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>debian</span></div></a></li><li class="depth-2 branch"><a href="jepsen.reconnect.html"><div class="inner"><span class="tree" style="top: -83px;"><span class="top" style="height: 92px;"></span><span class="bottom"></span></span><span>reconnect</span></div></a></li><li class="depth-2 branch"><a href="jepsen.repl.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>repl</span></div></a></li><li class="depth-2 branch"><a href="jepsen.report.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>report</span></div></a></li><li class="depth-2 branch"><a href="jepsen.store.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>store</span></div></a></li><li class="depth-2"><a href="jepsen.tests.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>tests</span></div></a></li><li class="depth-3 branch"><a href="jepsen.tests.adya.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>adya</span></div></a></li><li class="depth-3 branch"><a href="jepsen.tests.bank.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>bank</span></div></a></li><li class="depth-3 branch"><a href="jepsen.tests.causal.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>causal</span></div></a></li><li class="depth-3 branch"><a href="jepsen.tests.linearizable-register.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>linearizable-register</span></div></a></li><li class="depth-3"><a href="jepsen.tests.long-fork.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>long-fork</span></div></a></li><li class="depth-2 branch"><a href="jepsen.util.html"><div class="inner"><span class="tree" style="top: -176px;"><span class="top" style="height: 185px;"></span><span class="bottom"></span></span><span>util</span></div></a></li><li class="depth-2"><a href="jepsen.web.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>web</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="jepsen.checker.perf.html#var-bucket-points"><div class="inner"><span>bucket-points</span></div></a></li><li class="depth-1"><a href="jepsen.checker.perf.html#var-bucket-scale"><div class="inner"><span>bucket-scale</span></div></a></li><li class="depth-1"><a href="jepsen.checker.perf.html#var-bucket-time"><div class="inner"><span>bucket-time</span></div></a></li><li class="depth-1"><a href="jepsen.checker.perf.html#var-buckets"><div class="inner"><span>buckets</span></div></a></li><li class="depth-1"><a href="jepsen.checker.perf.html#var-completions-by-f-type"><div class="inner"><span>completions-by-f-type</span></div></a></li><li class="depth-1"><a href="jepsen.checker.perf.html#var-fs-.3Epoints"><div class="inner"><span>fs-&gt;points</span></div></a></li><li class="depth-1"><a href="jepsen.checker.perf.html#var-invokes-by-f"><div class="inner"><span>invokes-by-f</span></div></a></li><li class="depth-1"><a href="jepsen.checker.perf.html#var-invokes-by-f-type"><div class="inner"><span>invokes-by-f-type</span></div></a></li><li class="depth-1"><a href="jepsen.checker.perf.html#var-invokes-by-type"><div class="inner"><span>invokes-by-type</span></div></a></li><li class="depth-1"><a href="jepsen.checker.perf.html#var-latencies-.3Equantiles"><div class="inner"><span>latencies-&gt;quantiles</span></div></a></li><li class="depth-1"><a href="jepsen.checker.perf.html#var-latency-point"><div class="inner"><span>latency-point</span></div></a></li><li class="depth-1"><a href="jepsen.checker.perf.html#var-latency-preamble"><div class="inner"><span>latency-preamble</span></div></a></li><li class="depth-1"><a href="jepsen.checker.perf.html#var-nemesis-events"><div class="inner"><span>nemesis-events</span></div></a></li><li class="depth-1"><a href="jepsen.checker.perf.html#var-nemesis-intervals"><div class="inner"><span>nemesis-intervals</span></div></a></li><li class="depth-1"><a href="jepsen.checker.perf.html#var-nemesis-lines"><div class="inner"><span>nemesis-lines</span></div></a></li><li class="depth-1"><a href="jepsen.checker.perf.html#var-nemesis-regions"><div class="inner"><span>nemesis-regions</span></div></a></li><li class="depth-1"><a href="jepsen.checker.perf.html#var-point-graph.21"><div class="inner"><span>point-graph!</span></div></a></li><li class="depth-1"><a href="jepsen.checker.perf.html#var-preamble"><div class="inner"><span>preamble</span></div></a></li><li class="depth-1"><a href="jepsen.checker.perf.html#var-qs-.3Ecolors"><div class="inner"><span>qs-&gt;colors</span></div></a></li><li class="depth-1"><a href="jepsen.checker.perf.html#var-quantiles"><div class="inner"><span>quantiles</span></div></a></li><li class="depth-1"><a href="jepsen.checker.perf.html#var-quantiles-graph.21"><div class="inner"><span>quantiles-graph!</span></div></a></li><li class="depth-1"><a href="jepsen.checker.perf.html#var-rate"><div class="inner"><span>rate</span></div></a></li><li class="depth-1"><a href="jepsen.checker.perf.html#var-rate-graph.21"><div class="inner"><span>rate-graph!</span></div></a></li><li class="depth-1"><a href="jepsen.checker.perf.html#var-rate-preamble"><div class="inner"><span>rate-preamble</span></div></a></li><li class="depth-1"><a href="jepsen.checker.perf.html#var-type-.3Ecolor"><div class="inner"><span>type-&gt;color</span></div></a></li><li class="depth-1"><a href="jepsen.checker.perf.html#var-types"><div class="inner"><span>types</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">jepsen.checker.perf</h1><div class="doc"><div class="markdown"><p>Supporting functions for performance analysis.</p></div></div><div class="public anchor" id="var-bucket-points"><h3>bucket-points</h3><div class="usage"><code>(bucket-points dt points)</code></div><div class="doc"><div class="markdown"><p>Takes a time window dt and a sequence of [time, _] points, and emits a seq of [time, points-in-window] buckets, ordered by time. Time is at the midpoint of the window.</p></div></div><div class="src-link"><a href="https://github.com/jepsen-io/jepsen/blob/0.1.11/jepsen/src/jepsen/checker/perf.clj#L37">view source</a></div></div><div class="public anchor" id="var-bucket-scale"><h3>bucket-scale</h3><div class="usage"><code>(bucket-scale dt b)</code></div><div class="doc"><div class="markdown"><p>Given a bucket size dt, and a bucket number (e.g. 0, 1, …), returns the time at the midpoint of that bucket.</p></div></div><div class="src-link"><a href="https://github.com/jepsen-io/jepsen/blob/0.1.11/jepsen/src/jepsen/checker/perf.clj#L16">view source</a></div></div><div class="public anchor" id="var-bucket-time"><h3>bucket-time</h3><div class="usage"><code>(bucket-time dt t)</code></div><div class="doc"><div class="markdown"><p>Given a bucket size dt and a time t, computes the time at the midpoint of the bucket this time falls into.</p></div></div><div class="src-link"><a href="https://github.com/jepsen-io/jepsen/blob/0.1.11/jepsen/src/jepsen/checker/perf.clj#L22">view source</a></div></div><div class="public anchor" id="var-buckets"><h3>buckets</h3><div class="usage"><code>(buckets dt)</code><code>(buckets dt tmax)</code></div><div class="doc"><div class="markdown"><p>Given a bucket size dt, emits a lazy sequence of times at the midpoints of each bucket.</p></div></div><div class="src-link"><a href="https://github.com/jepsen-io/jepsen/blob/0.1.11/jepsen/src/jepsen/checker/perf.clj#L28">view source</a></div></div><div class="public anchor" id="var-completions-by-f-type"><h3>completions-by-f-type</h3><div class="usage"><code>(completions-by-f-type history)</code></div><div class="doc"><div class="markdown"><p>Takes a history and returns a map of f -&gt; type-&gt; ops, for all completions in history.</p></div></div><div class="src-link"><a href="https://github.com/jepsen-io/jepsen/blob/0.1.11/jepsen/src/jepsen/checker/perf.clj#L105">view source</a></div></div><div class="public anchor" id="var-fs-.3Epoints"><h3>fs-&gt;points</h3><div class="usage"><code>(fs-&gt;points fs)</code></div><div class="doc"><div class="markdown"><p>Given a sequence of :f’s, yields a map of f -&gt; gnuplot-point-type, so we can render each function in a different style.</p></div></div><div class="src-link"><a href="https://github.com/jepsen-io/jepsen/blob/0.1.11/jepsen/src/jepsen/checker/perf.clj#L137">view source</a></div></div><div class="public anchor" id="var-invokes-by-f"><h3>invokes-by-f</h3><div class="usage"><code>(invokes-by-f history)</code></div><div class="doc"><div class="markdown"><p>Takes a history and returns a map of f -&gt; ops, for all invocations.</p></div></div><div class="src-link"><a href="https://github.com/jepsen-io/jepsen/blob/0.1.11/jepsen/src/jepsen/checker/perf.clj#L90">view source</a></div></div><div class="public anchor" id="var-invokes-by-f-type"><h3>invokes-by-f-type</h3><div class="usage"><code>(invokes-by-f-type history)</code></div><div class="doc"><div class="markdown"><p>Takes a history and returns a map of f -&gt; type -&gt; ops, for all invocations.</p></div></div><div class="src-link"><a href="https://github.com/jepsen-io/jepsen/blob/0.1.11/jepsen/src/jepsen/checker/perf.clj#L97">view source</a></div></div><div class="public anchor" id="var-invokes-by-type"><h3>invokes-by-type</h3><div class="usage"><code>(invokes-by-type ops)</code></div><div class="doc"><div class="markdown"><p>Splits up a sequence of invocations into ok, failed, and crashed ops by looking at their corresponding completions.</p></div></div><div class="src-link"><a href="https://github.com/jepsen-io/jepsen/blob/0.1.11/jepsen/src/jepsen/checker/perf.clj#L82">view source</a></div></div><div class="public anchor" id="var-latencies-.3Equantiles"><h3>latencies-&gt;quantiles</h3><div class="usage"><code>(latencies-&gt;quantiles dt qs points)</code></div><div class="doc"><div class="markdown"><p>Takes a time window in seconds, a sequence of quantiles from 0 to 1, and a sequence of [time, latency] pairs. Groups pairs by their time window and emits a emits a map of quantiles to sequences of [time, latency-at-that-quantile] pairs, one per time window.</p></div></div><div class="src-link"><a href="https://github.com/jepsen-io/jepsen/blob/0.1.11/jepsen/src/jepsen/checker/perf.clj#L58">view source</a></div></div><div class="public anchor" id="var-latency-point"><h3>latency-point</h3><div class="usage"><code>(latency-point op)</code></div><div class="doc"><div class="markdown"><p>Given an operation, returns a [time, latency] pair: times in seconds, latencies in ms.</p></div></div><div class="src-link"><a href="https://github.com/jepsen-io/jepsen/blob/0.1.11/jepsen/src/jepsen/checker/perf.clj#L130">view source</a></div></div><div class="public anchor" id="var-latency-preamble"><h3>latency-preamble</h3><div class="usage"><code>(latency-preamble test output-path)</code></div><div class="doc"><div class="markdown"><p>Gnuplot commands for setting up a latency plot.</p></div></div><div class="src-link"><a href="https://github.com/jepsen-io/jepsen/blob/0.1.11/jepsen/src/jepsen/checker/perf.clj#L243">view source</a></div></div><div class="public anchor" id="var-nemesis-events"><h3>nemesis-events</h3><div class="usage"><code>(nemesis-events history)</code></div><div class="doc"><div class="markdown"><p>Given a history, constructs a sequence of times, in seconds, marking nemesis events other than start/stop pairs.</p></div></div><div class="src-link"><a href="https://github.com/jepsen-io/jepsen/blob/0.1.11/jepsen/src/jepsen/checker/perf.clj#L207">view source</a></div></div><div class="public anchor" id="var-nemesis-intervals"><h3>nemesis-intervals</h3><div class="usage"><code>(nemesis-intervals history)</code></div><div class="doc"><div class="markdown"><p>Given a history, constructs a sequence of [start-time, stop-time] intervals when the nemesis was active, in units of seconds.</p></div></div><div class="src-link"><a href="https://github.com/jepsen-io/jepsen/blob/0.1.11/jepsen/src/jepsen/checker/perf.clj#L171">view source</a></div></div><div class="public anchor" id="var-nemesis-lines"><h3>nemesis-lines</h3><div class="usage"><code>(nemesis-lines history)</code></div><div class="doc"><div class="markdown"><p>Emits a sequence of gnuplot commands rendering vertical lines where nemesis events occurred.</p></div></div><div class="src-link"><a href="https://github.com/jepsen-io/jepsen/blob/0.1.11/jepsen/src/jepsen/checker/perf.clj#L218">view source</a></div></div><div class="public anchor" id="var-nemesis-regions"><h3>nemesis-regions</h3><div class="usage"><code>(nemesis-regions history)</code></div><div class="doc"><div class="markdown"><p>Emits a sequence of gnuplot commands rendering shaded regions where the nemesis is active.</p></div></div><div class="src-link"><a href="https://github.com/jepsen-io/jepsen/blob/0.1.11/jepsen/src/jepsen/checker/perf.clj#L193">view source</a></div></div><div class="public anchor" id="var-point-graph.21"><h3>point-graph!</h3><div class="usage"><code>(point-graph! test history opts)</code></div><div class="doc"><div class="markdown"><p>Writes a plot of raw latency data points.</p></div></div><div class="src-link"><a href="https://github.com/jepsen-io/jepsen/blob/0.1.11/jepsen/src/jepsen/checker/perf.clj#L251">view source</a></div></div><div class="public anchor" id="var-preamble"><h3>preamble</h3><div class="usage"><code>(preamble output-path)</code></div><div class="doc"><div class="markdown"><p>Shared gnuplot preamble</p></div></div><div class="src-link"><a href="https://github.com/jepsen-io/jepsen/blob/0.1.11/jepsen/src/jepsen/checker/perf.clj#L234">view source</a></div></div><div class="public anchor" id="var-qs-.3Ecolors"><h3>qs-&gt;colors</h3><div class="usage"><code>(qs-&gt;colors qs)</code></div><div class="doc"><div class="markdown"><p>Given a sequence of quantiles q, yields a map of q -&gt; gnuplot-color, so we can render each latency curve in a different color.</p></div></div><div class="src-link"><a href="https://github.com/jepsen-io/jepsen/blob/0.1.11/jepsen/src/jepsen/checker/perf.clj#L145">view source</a></div></div><div class="public anchor" id="var-quantiles"><h3>quantiles</h3><div class="usage"><code>(quantiles qs points)</code></div><div class="doc"><div class="markdown"><p>Takes a sequence of quantiles from 0 to 1 and a sequence of values, and returns a map of quantiles to values at those quantiles.</p></div></div><div class="src-link"><a href="https://github.com/jepsen-io/jepsen/blob/0.1.11/jepsen/src/jepsen/checker/perf.clj#L46">view source</a></div></div><div class="public anchor" id="var-quantiles-graph.21"><h3>quantiles-graph!</h3><div class="usage"><code>(quantiles-graph! test history opts)</code></div><div class="doc"><div class="markdown"><p>Writes a plot of latency quantiles, by f, over time.</p></div></div><div class="src-link"><a href="https://github.com/jepsen-io/jepsen/blob/0.1.11/jepsen/src/jepsen/checker/perf.clj#L305">view source</a></div></div><div class="public anchor" id="var-rate"><h3>rate</h3><div class="usage"><code>(rate history)</code></div><div class="doc"><div class="markdown"><p>Map breaking down the mean rate of completions by f and type, plus totals at each level.</p></div></div><div class="src-link"><a href="https://github.com/jepsen-io/jepsen/blob/0.1.11/jepsen/src/jepsen/checker/perf.clj#L114">view source</a></div></div><div class="public anchor" id="var-rate-graph.21"><h3>rate-graph!</h3><div class="usage"><code>(rate-graph! test history opts)</code></div><div class="doc"><div class="markdown"><p>Writes a plot of operation rate by their completion times.</p></div></div><div class="src-link"><a href="https://github.com/jepsen-io/jepsen/blob/0.1.11/jepsen/src/jepsen/checker/perf.clj#L356">view source</a></div></div><div class="public anchor" id="var-rate-preamble"><h3>rate-preamble</h3><div class="usage"><code>(rate-preamble test output-path)</code></div><div class="doc"><div class="markdown"><p>Gnuplot commands for setting up a rate plot.</p></div></div><div class="src-link"><a href="https://github.com/jepsen-io/jepsen/blob/0.1.11/jepsen/src/jepsen/checker/perf.clj#L349">view source</a></div></div><div class="public anchor" id="var-type-.3Ecolor"><h3>type-&gt;color</h3><div class="usage"></div><div class="doc"><div class="markdown"><p>Takes a type of operation (e.g. :ok) and returns a gnuplot color.</p></div></div><div class="src-link"><a href="https://github.com/jepsen-io/jepsen/blob/0.1.11/jepsen/src/jepsen/checker/perf.clj#L165">view source</a></div></div><div class="public anchor" id="var-types"><h3>types</h3><div class="usage"></div><div class="doc"><div class="markdown"><p>What types are we rendering?</p></div></div><div class="src-link"><a href="https://github.com/jepsen-io/jepsen/blob/0.1.11/jepsen/src/jepsen/checker/perf.clj#L161">view source</a></div></div></div></body></html>